#----> TMUX config 

#-------------->  mouse
set-option -g mouse-select-pane on
setw -g mode-mouse on
set-option -g status-keys vi

#set to off to get mouse whell support in certain areas CAN CASUE WIERD BEHIVOUR
#set-option -g mouse-utf8 off

#--------------> status bard
set -g status-right-length 100
#right --> tmux plugins addons
set -g status-right "CPU:#{cpu_icon}#{cpu_percentage}|Batt:#{battery_icon}#{battery_percentage}|%a %h-%d %H:%M|#[bg=#002E41]#[fg=#008ED1](#h)"
#left
set -g status-left-length 100

#set -g status-left "#[fg=green]#H"
set -g status-left "#[fg=blue]#S::#[fg=#002E41] <#I:#P>"

#--------------> general conf
# utf8 is on
set -g utf8 on
set -g status-utf8 on

# address vim mode switching delay (http://superuser.com/a/252717/65504)
set -s escape-time 0


#make sure tmux knows to use a 256 color term
set -g default-terminal "screen-256color"

#disable resize to smallest cleint
setw -g aggressive-resize on

#Faster Command Sequences
set -s escape-time 0

# how long to show pane numbers (C-a q). 
# Default is too fast to scan the screen.
#needs a session name
#set display-panes-time 2000  # (which is 2sec) 

# scrollback buffer n lines
set -g history-limit 50000

# tmux messages are displayed for 4 seconds
set -g display-time 4000

# refresh 'status-left' and 'status-right' more often
set -g status-interval 5

# start window indexing and pane at one instead of zero
set -g base-index 1
set -g  pane-base-index 1

#dont allow zsh to rename windows
set -g allow-rename off

#fix scrolling issues
set -g terminal-overrides 'xterm*:smcup@:rmcup@'







#-------------->  KEY BINDS

#change the default control-b to the screenlike control-a
set -g prefix C-a
unbind C-b
bind C-a send-prefix

#test
#bind-key e command-prompt -p "launch what?" /; run-shell '~/bin/tmux-launcher'

#to still use F keys (use with prefix first so C-a F1 etc)
bind F1 send-keys F1
bind F2 send-keys F2
bind F3 send-keys F3
bind F4 send-keys F4
bind F5 send-keys F5
bind F6 send-keys F6
bind F7 send-keys F7
bind F8 send-keys F8
bind F9 send-keys F9
bind F10 send-keys F10
bind F11 send-keys F11
bind F12 send-keys F12

# F1 Tmux 
# F2 
# F3 
# F4 
# F5 
# F6 
# F7 
# F8 
# F9 
# F10


##-------------->  F11 windows

#make ctrl-a ctrl a work like alt-tab (last window)
bind-key C-a last-window
#windows
#move between windows (Alt key)
bind -n f1 previous-window  
bind -n f2 next-window  


##-------------->  F12- 'buffer' (tmux splits)
# toggle last 2 buffers/splits F12-F12

#resource the tmux file
unbind R
#bind-key r source-file /home/zeltak/.tmux.conf ; display-message "* ~/.tmux.conf is reloaded"
bind-key R source-file /home/zeltak/.tmux.conf 


###Vim type cuts
setw -g mode-keys vi

# use "v" and "s" to do vertical/horizontal splits, like vim
unbind % # Remove default binding since we’re replacing
bind s split-window -v
bind v split-window -h

#--------------> navigate
#panes
#move between panes (shift keys)
bind-key -n S-Up display-panes \; select-pane -U
bind-key -n S-Down display-panes \; select-pane -D
bind-key -n S-Left display-panes \; select-pane -L
bind-key -n S-Right display-panes \; select-pane -R




# switch " over to selecting windows
#bind-key '"' choose-window

# bind-key -r S-Left resize-pane -L 2
# bind-key -r S-Right resize-pane -R 2
# bind-key -r S-Down resize-pane -D 2
# bind-key -r S-Up resize-pane -U 2

#resize (Shift+alt)
bind-key -n M-S-Up resize-pane -U
bind-key -n M-S-Down resize-pane -D
bind-key -n M-S-Left resize-pane -L
bind-key -n M-S-Right resize-pane -R


bind-key -n M-F11 break-pane
bind-key -n C-F11 join-pane -h -s :. -t :-1
bind-key -n S-F11 resize-pane -Z


#bind-key -n F12 x detach


#launch the selector and swith to input based on selection
bind-key C-j display-panes \; select-pane -t :.  


#launch Emacs
#bind-key e   new-window -n "emacs"  "emacsclient -nw"
#bind-key C-e split-window "emacsclient -nw"

# use vim motion keys while in copy mode
setw -g mode-keys vi


#launch urls for non urxvt terms
bind-key u capture-pane \; save-buffer /tmp/tmux-buffer \; run-shell "$TERMINAL -e urlview /tmp/tmux-buffer"
bind-key u capture-pane \; save-buffer /tmp/tmux-buffer \; new-window -n "urlview" '$SHELL -c "urlview < /tmp/tmux-buffer"'




##########COPY PASTE
# Set Copy mode to escape key
unbind [
bind Escape copy-mode

#vim style copy cuts
# in copy mode…
bind -t vi-copy v begin-selection # `v` begins a selection. (movement keys to select the desired bits)
bind -t vi-copy y copy-selection # `y` copies the current selection to one of tmux's "paste buffers"
bind -t vi-copy V rectangle-toggle # `V` changes between line- and columnwise selection
bind -t vi-copy Y copy-end-of-line # ^1
bind + delete-buffer
#paste
bind p paste-buffer # `prefix + p` pastes the latest buffer

##CLIPBOARD selection integration
##Requires prefix key before the command key
#Copy tmux paste buffer to CLIPBOARD
bind C-c run "tmux show-buffer | xsel -i -b"
#Copy CLIPBOARD to tmux paste buffer and paste tmux paste buffer
bind C-v run "tmux set-buffer -- \"$(xsel -o -b)\"; tmux paste-buffer"



##########MISC

#open ssh windows
#bind-key S   command-prompt -p "host" "split-window 'ssh %1'"
#bind-key C-s command-prompt -p "host" "new-window -n %1 'ssh %1'"

#open Emacs windows
#bind-key y   new-window -n "emacs"  "emacsclient -nw"
#bind-key C-y split-window "emacsclient -nw"

#command to launch an internal ssh window
#bind S command-prompt -p 'SSH to:' "new-window -n %1 'ssh %1'"

#clear buffer history
bind -n C-k clear-history




#--------------> Theme and look

#default theme picker
source /home/zeltak/.tmux/neonG
#source /home/zeltak/.tmux/solarized-dark

#--------------> PLUGINS

# List of plugins
# Supports `github_username/repo` or full git repo URLs
set -g @tpm_plugins '              \
  tmux-plugins/tpm                 \
  tmux-plugins/tmux-cpu           \
  tmux-plugins/tmux-open       \
  tmux-plugins/tmux-yank       \
  tmux-plugins/tmux-sessionist     \
  tmux-plugins/tmux-copycat    \
  tmux-plugins/tmux-battery       \
'
# Other examples:
# github_username/plugin_name    \
# git@github.com/user/plugin     \
# git@bitbucket.com/user/plugin  \

# Initializes TMUX plugin manager.
# Keep this line at the very bottom of tmux.conf.
run-shell '~/.tmux/plugins/tpm/tpm'